# Needs python path
refs:
    - python.yml

config:
    # Needs git CLI tool
    loadMeSysDeps:
        git:
            apt: git
            url: https://git-scm.com/downloads

    # The git version itself
    gitVersion:
        __resolver__: nmk_base.git.GitVersionResolver

    # Git version stamp file
    gitVersionStamp: ${outputDir}/.gitversion

tasks:
    # To refresh git version stamp file
    git.version:
        description: Refresh git version
        emoji: ":regional_indicator_symbol_letter_g: .:label: "
        output: ${gitVersionStamp}
        params:
            version: ${gitVersion}
        silent: true
        builder: nmk_base.git.GitVersionRefresh
        deps:
            - out
        appendToDeps: setup

    # Deep clean (remove all git ignored stuff)
    git.clean:
        description: Deep clean project
        emoji: ":regional_indicator_symbol_letter_g: .:broom:"
        builder: nmk_base.git.GitClean
